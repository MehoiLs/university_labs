# Лабораторная работа 3

Необходимо разработать схему базы данных из любой предметной области (можно взять то же самое, 
что взяли на курсе по БД и упростить, но нельзя брать предметную область из примера по ссылке). 
Предметные у каждого должны быть индивидуальные, так что договаривайтесь и "столбите" заранее. 
Повторения не принимаются

Требования к схеме следующие:
1) Схема должна содержать минимум одну связь один к одному 
(пример - студент-номер телефона или студент-адрес проживания)
2) Схема должна содержать минимум одну связь один ко многим 
(пример - группа-студент)
3) Схема должна содержать минимум одну связь многие ко многим 
(пример - курс по выбору-студент)
4) Должны быть описаны первичные ключи где необходимо
5) Первичные ключи должны быть автосгенерированы на уровне БД при добавлении сущности в таблицу
6) Должны быть описаны внешние ключи где необходимо
7) Должны быть описаны ограничения на данные, вставляемые в таблицу, где это необходимо 
(обязательные поля, максимальная длинна поля и т.п.)

Требуется с помощью **Entity Framework** и подхода **Code First** поднять эту базу данных. 
Для сдачи достаточно приложения (можно сделать отдельное консольное приложение, можно объединить 
со следующими частями лабораторных (тем, кто претендует на автомат), рекомендую объединить), 
которое подключается к пустой базе данных и при первом запуске прогоняет миграции на создание 
таблиц (учитывать, что при повторных запусках нужна проверка на то, что таблицы уже существуют, 
т.е. они не должны пересоздаваться)

_В качестве БД-сервера можно использовать сервер MSSQLLocalDB (требуется заранее установить 
как компонент через VS Installer, после чего его можно будет найти пройдя по пути 
Вид -> Обозреватель объектов SQL Server. Там же можно создать пустую БД в пару кликов и 
там же можно получить строку подключения к этой БД)_

Перед выполнением будет полезно изучить:
https://www.entityframeworktutorial.net/code-first/what-is-code-first.aspx

## Для автомата (на 4)
В дополнении к предыдущим требованиям вместо консольного приложения необходимо реализовать web-api 
приложение на основе контроллеров. Демонстрация работоспособности будет проводиться через Swagger

Требования к приложению следующие:
1) Приложение должно содержать класс, который отвечает за CRUD-операции с БД, который 
через контекст будет манипулировать данными. Учтите, что такой класс должен быть только один
и должен уметь манипулировать данными из любых таблиц (т.е. это должен быть обобщённый класс)
2) Приложение должно содержать контроллеры, обрабатывающие HTTP запросы (Post, Get, Put/Patch, Delete), 
которые обращаются к классу из п.1. для добавления, получения, обновления и удаления данных в БД
3) Приложение должно валидировать данные, соответственно существующим ограничениям, которые были 
навешаны на данные, вставляемые в таблицу в БД. (Подсказка: на вход эндпоинтам контроллеров, 
обрабатывающим Post-запросы подавать `ViewModel` сущностей, которые будут трансформироваться в `Entity`, 
которые будут писаться в БД. Во `ViewModel`-классах можно прибегнуть к `System.ComponentModel.DataAnnotations`).
При передаче каких-либо невалидных моделей приложение должно выдавать вразумительный ответ об ошибке 
(Статус-коды и классы ошибок могут помочь)
4) Приложение должно содержать все необходимые GET-запросы для демонстрации всех связей из п.1-3 
предыдущего раздела
5) При реализации DELETE-запросов предусмотреть каскадное удаление там, где это логически требуется

Перед выполнением будет полезно изучить:
https://learn.microsoft.com/ru-ru/aspnet/core/tutorials/first-web-api?view=aspnetcore-8.0